<div
  id="header-container"
  class="flex items-center gap-4 px-3 h-10 text-sm select-none"
>
  <div id="header-title" class="font-semibold tracking-wide">Pixart</div>
  <nav id="header-nav" class="flex items-center gap-2">
    <div
      id="menu-file-wrapper"
      class="relative"
      (mouseenter)="openFileMenuHover()"
      (mouseleave)="closeFileMenuHover()"
    >
      <button
        type="button"
        id="menu-file-button"
        class="px-2 py-1 rounded-sm hover:bg-neutral-200 dark:hover:bg-neutral-700"
        (click)="showFileMenu.set(!showFileMenu())"
        [attr.aria-expanded]="showFileMenu()"
      >
        {{ "menu.file" | transloco }}
      </button>
      @if (showFileMenu()) {
        <div
          id="menu-file-dropdown"
          class="absolute mt-1 left-0 bg-white dark:bg-neutral-800 border border-neutral-200 dark:border-neutral-700 rounded shadow-md z-50 w-44"
          tabindex="0"
          (focusin)="onMenuFocusIn()"
          (focusout)="onMenuFocusOut()"
        >
          <button
            id="menu-file-new-action"
            class="w-full text-left px-3 py-2 hover:bg-neutral-100 dark:hover:bg-neutral-700"
            (click)="onNewProject()"
            [attr.aria-keyshortcuts]="hotkeys.getBinding('file.new')"
          >
            {{ "file.new" | transloco }}
          </button>
          <button
            id="menu-file-open-action"
            class="w-full text-left px-3 py-2 hover:bg-neutral-100 dark:hover:bg-neutral-700"
            (click)="onOpenFromComputer()"
            [attr.aria-keyshortcuts]="hotkeys.getBinding('file.open')"
          >
            {{ "file.openFromComputer" | transloco }}
          </button>
          <button
            id="menu-file-save-computer-action"
            class="w-full text-left px-3 py-2 hover:bg-neutral-100 dark:hover:bg-neutral-700"
            (click)="onSaveToComputer()"
            [attr.aria-keyshortcuts]="hotkeys.getBinding('file.saveToComputer')"
          >
            {{ "file.saveToComputer" | transloco }}
          </button>
          <div
            id="menu-file-divider"
            class="border-t border-neutral-100 dark:border-neutral-700"
          ></div>
          <button
            id="menu-file-save-local-action"
            class="w-full text-left px-3 py-2 hover:bg-neutral-100 dark:hover:bg-neutral-700"
            (click)="onSave()"
            [attr.aria-keyshortcuts]="hotkeys.getBinding('file.save')"
          >
            {{ "file.saveLocal" | transloco }}
          </button>
        </div>
      }
    </div>
    <button
      type="button"
      id="menu-edit-button"
      class="px-2 py-1 rounded-sm hover:bg-neutral-200 dark:hover:bg-neutral-700"
    >
      {{ "menu.edit" | transloco }}
    </button>
    <div
      id="menu-insert-wrapper"
      class="relative"
      (mouseenter)="openInsertMenuHover()"
      (mouseleave)="closeInsertMenuHover()"
    >
      <button
        type="button"
        id="menu-insert-button"
        class="px-2 py-1 rounded-sm hover:bg-neutral-200 dark:hover:bg-neutral-700"
        (click)="showInsertMenu.set(!showInsertMenu())"
        [attr.aria-expanded]="showInsertMenu()"
      >
        {{ "menu.insert" | transloco }}
      </button>
      @if (showInsertMenu()) {
        <div
          id="menu-insert-dropdown"
          class="absolute mt-1 left-0 bg-white dark:bg-neutral-800 border border-neutral-200 dark:border-neutral-700 rounded shadow-md z-50 w-44"
          tabindex="0"
          (focusin)="onInsertMenuFocusIn()"
          (focusout)="onInsertMenuFocusOut()"
        >
          <button
            id="menu-insert-image-action"
            class="w-full text-left px-3 py-2 hover:bg-neutral-100 dark:hover:bg-neutral-700"
            (click)="onInsertImage()"
            [attr.aria-keyshortcuts]="hotkeys.getBinding('insert.image')"
          >
            {{ "insert.insertImage" | transloco }}
          </button>
        </div>
      }
    </div>
    <button
      type="button"
      id="menu-undo-button"
      class="px-2 py-1 rounded-sm hover:bg-neutral-200 dark:hover:bg-neutral-700"
      (click)="onUndo()"
      title="{{ 'menu.undo' | transloco }}"
      [attr.aria-keyshortcuts]="hotkeys.getBinding('edit.undo')"
    >
      {{ "menu.undo" | transloco }}
    </button>
    <button
      type="button"
      id="menu-redo-button"
      class="px-2 py-1 rounded-sm hover:bg-neutral-200 dark:hover:bg-neutral-700"
      (click)="onRedo()"
      title="{{ 'menu.redo' | transloco }}"
      [attr.aria-keyshortcuts]="hotkeys.getBinding('edit.redo')"
    >
      {{ "menu.redo" | transloco }}
    </button>
    <div
      id="menu-tool-wrapper"
      class="relative"
      (mouseenter)="openToolMenuHover()"
      (mouseleave)="closeToolMenuHover()"
    >
      <button
        type="button"
        id="menu-tool-button"
        class="px-2 py-1 rounded-sm hover:bg-neutral-200 dark:hover:bg-neutral-700"
        (click)="showToolMenu.set(!showToolMenu())"
        [attr.aria-expanded]="showToolMenu()"
      >
        {{ "menu.tool" | transloco }}
      </button>
      @if (showToolMenu()) {
        <div
          id="menu-tool-dropdown"
          class="absolute mt-1 left-0 bg-white dark:bg-neutral-800 border border-neutral-200 dark:border-neutral-700 rounded shadow-md z-50 w-44"
          tabindex="0"
          (focusin)="onToolMenuFocusIn()"
          (focusout)="onToolMenuFocusOut()"
        >
          <button
            id="menu-tool-bone-action"
            class="w-full text-left px-3 py-2 hover:bg-neutral-100 dark:hover:bg-neutral-700"
            (click)="onSelectBoneTool()"
            [attr.aria-keyshortcuts]="hotkeys.getBinding('tool.bone')"
          >
            {{ "tools.bone" | transloco }}
          </button>
        </div>
      }
    </div>
    <div
      id="menu-help-wrapper"
      class="relative"
      (mouseenter)="openHelpMenuHover()"
      (mouseleave)="closeHelpMenuHover()"
    >
      <button
        type="button"
        id="menu-help-button"
        class="px-2 py-1 rounded-sm hover:bg-neutral-200 dark:hover:bg-neutral-700"
        (click)="showHelpMenu.set(!showHelpMenu())"
        [attr.aria-expanded]="showHelpMenu()"
      >
        {{ "menu.help" | transloco }}
      </button>
      @if (showHelpMenu()) {
        <div
          id="menu-help-dropdown"
          class="absolute mt-1 left-0 bg-white dark:bg-neutral-800 border border-neutral-200 dark:border-neutral-700 rounded shadow-md z-50 w-44"
          tabindex="0"
          (focusin)="onHelpMenuFocusIn()"
          (focusout)="onHelpMenuFocusOut()"
        >
          <button
            id="menu-help-hotkeys-action"
            class="w-full text-left px-3 py-2 hover:bg-neutral-100 dark:hover:bg-neutral-700"
            (click)="onConfigureHotkeys()"
          >
            {{ "hotkeys.title" | transloco }}
          </button>
        </div>
      }
    </div>
  </nav>
  <div
    id="header-badges-container"
    class="ml-auto flex items-center gap-2 text-xs text-neutral-500"
  >
    <span id="header-badges-title">{{ "badges.title" | transloco }}</span>
    <div id="header-controls" class="ml-2 flex items-center gap-1">
      <button
        type="button"
        id="lang-vi-button"
        class="px-2 py-0.5 rounded-sm border border-neutral-300 dark:border-neutral-700 hover:bg-neutral-200 dark:hover:bg-neutral-700"
        (click)="setLang('vi')"
      >
        VI
      </button>
      <button
        type="button"
        id="lang-en-button"
        class="px-2 py-0.5 rounded-sm border border-neutral-300 dark:border-neutral-700 hover:bg-neutral-200 dark:hover:bg-neutral-700"
        (click)="setLang('en')"
      >
        EN
      </button>
      <button
        type="button"
        id="theme-toggle-button"
        class="px-2 py-0.5 rounded-sm border border-neutral-300 dark:border-neutral-700 hover:bg-neutral-200 dark:hover:bg-neutral-700"
        (click)="toggleTheme()"
        title="{{ 'theme.toggle' | transloco }}"
      >
        <ng-icon
          [name]="settings.theme() === 'dark' ? 'featherSun' : 'featherMoon'"
          class="w-4 h-4"
        ></ng-icon>
      </button>
    </div>
  </div>
</div>

<pa-insert-image-dialog
  (onConfirm)="handleInsertImageConfirm($event)"
  (onCancel)="handleInsertImageCancel()"
/>

<pa-hotkey-config-dialog />
