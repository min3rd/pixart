<div
  class="grid h-full select-none"
  [style.gridTemplateColumns]="gridCols()"
  [style.gridTemplateRows]="gridRows()"
>
  <pa-editor-header
    class="row-start-1 col-start-1 -col-end-1"
    (onContentAwareFillToggle)="onContentAwareFillToggle()"
    (onDefinePatternToggle)="onDefinePatternToggle()"
  />

  <pa-tool-palette
    class="row-start-2 col-start-1 overflow-auto border-r border-neutral-200 dark:border-neutral-800 bg-neutral-100/60 dark:bg-neutral-800/40"
    (onContentAwareFillActivate)="onContentAwareFillToggle()"
    (onDefinePatternActivate)="onDefinePatternToggle()"
  />

  <div
    class="row-start-2 col-start-2 cursor-col-resize bg-transparent hover:bg-neutral-300/30 dark:hover:bg-neutral-600/30"
    (pointerdown)="onGripDown('left', $event)"
  ></div>

  <pa-editor-canvas
    class="row-start-2 col-start-3 overflow-hidden bg-white dark:bg-neutral-900"
  />

  <div
    class="row-start-2 col-start-4 cursor-col-resize bg-transparent hover:bg-neutral-300/30 dark:hover:bg-neutral-600/30"
    (pointerdown)="onGripDown('right', $event)"
  ></div>

  <div
    class="row-start-2 col-start-5 overflow-hidden border-l border-neutral-200 dark:border-neutral-800 bg-neutral-100/60 dark:bg-neutral-800/40 flex flex-col"
    id="right-panel-container"
  >
    <div
      class="shrink-0 flex border-b border-neutral-200 dark:border-neutral-800"
      id="right-panel-tabs"
    >
      <button
        type="button"
        (click)="rightPanelTab.set('layers')"
        class="flex-1 px-4 py-2 text-sm font-medium"
        [class.bg-white]="rightPanelTab() === 'layers'"
        [class.dark\:bg-neutral-900]="rightPanelTab() === 'layers'"
        [class.text-blue-600]="rightPanelTab() === 'layers'"
        [class.dark\:text-blue-400]="rightPanelTab() === 'layers'"
        [class.text-neutral-600]="rightPanelTab() !== 'layers'"
        [class.dark\:text-neutral-400]="rightPanelTab() !== 'layers'"
        id="layers-tab-button"
        [paTooltip]="'tooltips.panels.layers' | transloco"
      >
        {{ "layers.title" | transloco }}
      </button>
      <button
        type="button"
        (click)="rightPanelTab.set('bones')"
        class="flex-1 px-4 py-2 text-sm font-medium"
        [class.bg-white]="rightPanelTab() === 'bones'"
        [class.dark\:bg-neutral-900]="rightPanelTab() === 'bones'"
        [class.text-blue-600]="rightPanelTab() === 'bones'"
        [class.dark\:text-blue-400]="rightPanelTab() === 'bones'"
        [class.text-neutral-600]="rightPanelTab() !== 'bones'"
        [class.dark\:text-neutral-400]="rightPanelTab() !== 'bones'"
        id="bones-tab-button"
        [paTooltip]="'tooltips.panels.bones' | transloco"
      >
        {{ "bones.title" | transloco }}
      </button>
      @if (contentAwareFillState.isActive()) {
        <button
          type="button"
          (click)="rightPanelTab.set('contentAwareFill')"
          class="flex-1 px-4 py-2 text-sm font-medium"
          [class.bg-white]="rightPanelTab() === 'contentAwareFill'"
          [class.dark\:bg-neutral-900]="rightPanelTab() === 'contentAwareFill'"
          [class.text-blue-600]="rightPanelTab() === 'contentAwareFill'"
          [class.dark\:text-blue-400]="rightPanelTab() === 'contentAwareFill'"
          [class.text-neutral-600]="rightPanelTab() !== 'contentAwareFill'"
          [class.dark\:text-neutral-400]="rightPanelTab() !== 'contentAwareFill'"
          id="content-aware-fill-tab-button"
          [paTooltip]="'tooltips.panels.contentAwareFill' | transloco"
        >
          {{ "contentAwareFill.title" | transloco }}
        </button>
      }
      @if (definePatternState.isActive()) {
        <button
          type="button"
          (click)="rightPanelTab.set('definePattern')"
          class="flex-1 px-4 py-2 text-sm font-medium"
          [class.bg-white]="rightPanelTab() === 'definePattern'"
          [class.dark\:bg-neutral-900]="rightPanelTab() === 'definePattern'"
          [class.text-blue-600]="rightPanelTab() === 'definePattern'"
          [class.dark\:text-blue-400]="rightPanelTab() === 'definePattern'"
          [class.text-neutral-600]="rightPanelTab() !== 'definePattern'"
          [class.dark\:text-neutral-400]="rightPanelTab() !== 'definePattern'"
          id="define-pattern-tab-button"
          [paTooltip]="'tooltips.tools.definePattern' | transloco"
        >
          {{ "definePattern.title" | transloco }}
        </button>
      }
    </div>
    <div class="flex-1 overflow-auto">
      @if (rightPanelTab() === 'layers') {
        <pa-layers-panel />
      } @else if (rightPanelTab() === 'bones') {
        <pa-bones-panel />
      } @else if (rightPanelTab() === 'contentAwareFill') {
        <pa-content-aware-fill-panel
          (onApply)="onContentAwareFillApply()"
          (onCancel)="onContentAwareFillCancel()"
        />
      } @else if (rightPanelTab() === 'definePattern') {
        <pa-define-pattern-panel />
      }
    </div>
  </div>

  <div
    class="row-start-3 col-start-1 -col-end-1 cursor-row-resize bg-transparent hover:bg-neutral-300/30 dark:hover:bg-neutral-600/30"
    (pointerdown)="onGripDown('bottom', $event)"
  ></div>

  <div
    id="bottom-panel-container"
    class="row-start-4 col-start-1 -col-end-1 border-t border-neutral-200 dark:border-neutral-800 bg-neutral-50 dark:bg-neutral-900 flex flex-col"
  >
    <div
      class="shrink-0 flex border-b border-neutral-200 dark:border-neutral-800 bg-white dark:bg-neutral-800"
      id="bottom-panel-tabs"
    >
      <button
        type="button"
        (click)="bottomPanelTab.set('timeline')"
        class="px-4 py-2 text-sm font-medium"
        [class.bg-neutral-50]="bottomPanelTab() === 'timeline'"
        [class.dark\:bg-neutral-900]="bottomPanelTab() === 'timeline'"
        [class.text-blue-600]="bottomPanelTab() === 'timeline'"
        [class.dark\:text-blue-400]="bottomPanelTab() === 'timeline'"
        [class.text-neutral-600]="bottomPanelTab() !== 'timeline'"
        [class.dark\:text-neutral-400]="bottomPanelTab() !== 'timeline'"
        id="timeline-tab-button"
        [paTooltip]="'tooltips.panels.timeline' | transloco"
      >
        {{ "timeline.title" | transloco }}
      </button>
      <button
        type="button"
        (click)="bottomPanelTab.set('animationCreator')"
        class="px-4 py-2 text-sm font-medium"
        [class.bg-neutral-50]="bottomPanelTab() === 'animationCreator'"
        [class.dark\:bg-neutral-900]="bottomPanelTab() === 'animationCreator'"
        [class.text-blue-600]="bottomPanelTab() === 'animationCreator'"
        [class.dark\:text-blue-400]="bottomPanelTab() === 'animationCreator'"
        [class.text-neutral-600]="bottomPanelTab() !== 'animationCreator'"
        [class.dark\:text-neutral-400]="bottomPanelTab() !== 'animationCreator'"
        id="animation-creator-tab-button"
        [paTooltip]="'tooltips.panels.animationCreator' | transloco"
      >
        {{ "animationCreator.title" | transloco }}
      </button>
    </div>
    <div class="flex-1 overflow-hidden">
      @if (bottomPanelTab() === 'timeline') {
      <pa-timeline-panel class="h-full" />
      } @else {
      <pa-animation-creator-panel class="h-full" />
      }
    </div>
  </div>
</div>
