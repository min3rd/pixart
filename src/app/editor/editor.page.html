<div
  class="grid h-full select-none"
  [style.gridTemplateColumns]="gridCols()"
  [style.gridTemplateRows]="gridRows()"
>
  <pa-editor-header
    class="row-start-1 col-start-1 -col-end-1"
    (onContentAwareFillToggle)="onContentAwareFillToggle()"
    (onDefinePatternToggle)="onDefinePatternToggle()"
    (onDefineBrushToggle)="onDefineBrushToggle()"
    (onDefineShapeToggle)="onDefineShapeToggle()"
    (onStrokeToggle)="onStrokeToggle()"
    (onPaletteManage)="onPaletteManage()"
  />

  <pa-tool-palette
    class="row-start-2 col-start-1 overflow-auto border-r border-neutral-200 dark:border-neutral-800 bg-neutral-100/60 dark:bg-neutral-800/40"
  />

  <div
    class="row-start-2 col-start-2 cursor-col-resize bg-transparent hover:bg-neutral-300/30 dark:hover:bg-neutral-600/30"
    (pointerdown)="onGripDown('left', $event)"
  ></div>

  <pa-editor-canvas
    class="row-start-2 col-start-3 overflow-hidden bg-white dark:bg-neutral-900"
  />

  <div
    class="row-start-2 col-start-4 cursor-col-resize bg-transparent hover:bg-neutral-300/30 dark:hover:bg-neutral-600/30"
    (pointerdown)="onGripDown('right', $event)"
  ></div>

  <div
    class="row-start-2 col-start-5 overflow-hidden border-l border-neutral-200 dark:border-neutral-800 bg-neutral-100/60 dark:bg-neutral-800/40 flex flex-col"
    id="right-panel-container"
  >
    <div
      class="shrink-0 flex border-b border-neutral-200 dark:border-neutral-800"
      id="right-panel-tabs"
    >
      <button
        type="button"
        (click)="rightPanelTab.set('layers')"
        class="flex-1 px-4 py-2 text-sm font-medium"
        [class.bg-white]="rightPanelTab() === 'layers'"
        [class.dark\:bg-neutral-900]="rightPanelTab() === 'layers'"
        [class.text-blue-600]="rightPanelTab() === 'layers'"
        [class.dark\:text-blue-400]="rightPanelTab() === 'layers'"
        [class.text-neutral-600]="rightPanelTab() !== 'layers'"
        [class.dark\:text-neutral-400]="rightPanelTab() !== 'layers'"
        id="layers-tab-button"
        [paTooltip]="'tooltips.panels.layers' | transloco"
      >
        {{ "layers.title" | transloco }}
      </button>
      <button
        type="button"
        (click)="rightPanelTab.set('bones')"
        class="flex-1 px-4 py-2 text-sm font-medium"
        [class.bg-white]="rightPanelTab() === 'bones'"
        [class.dark\:bg-neutral-900]="rightPanelTab() === 'bones'"
        [class.text-blue-600]="rightPanelTab() === 'bones'"
        [class.dark\:text-blue-400]="rightPanelTab() === 'bones'"
        [class.text-neutral-600]="rightPanelTab() !== 'bones'"
        [class.dark\:text-neutral-400]="rightPanelTab() !== 'bones'"
        id="bones-tab-button"
        [paTooltip]="'tooltips.panels.bones' | transloco"
      >
        {{ "bones.title" | transloco }}
      </button>
      <button
        type="button"
        (click)="rightPanelTab.set('palette')"
        class="flex-1 px-4 py-2 text-sm font-medium"
        [class.bg-white]="rightPanelTab() === 'palette'"
        [class.dark\:bg-neutral-900]="rightPanelTab() === 'palette'"
        [class.text-blue-600]="rightPanelTab() === 'palette'"
        [class.dark\:text-blue-400]="rightPanelTab() === 'palette'"
        [class.text-neutral-600]="rightPanelTab() !== 'palette'"
        [class.dark\:text-neutral-400]="rightPanelTab() !== 'palette'"
        id="palette-tab-button"
        [paTooltip]="'tooltips.panels.palette' | transloco"
      >
        {{ "palette.title" | transloco }}
      </button>
      @if (contentAwareFillState.isActive()) {
      <button
        type="button"
        (click)="rightPanelTab.set('contentAwareFill')"
        class="flex-1 px-4 py-2 text-sm font-medium"
        [class.bg-white]="rightPanelTab() === 'contentAwareFill'"
        [class.dark\:bg-neutral-900]="rightPanelTab() === 'contentAwareFill'"
        [class.text-blue-600]="rightPanelTab() === 'contentAwareFill'"
        [class.dark\:text-blue-400]="rightPanelTab() === 'contentAwareFill'"
        [class.text-neutral-600]="rightPanelTab() !== 'contentAwareFill'"
        [class.dark\:text-neutral-400]="rightPanelTab() !== 'contentAwareFill'"
        id="content-aware-fill-tab-button"
        [paTooltip]="'tooltips.panels.contentAwareFill' | transloco"
      >
        {{ "contentAwareFill.title" | transloco }}
      </button>
      } @if (definePatternState.isActive()) {
      <button
        type="button"
        (click)="rightPanelTab.set('definePattern')"
        class="flex-1 px-4 py-2 text-sm font-medium"
        [class.bg-white]="rightPanelTab() === 'definePattern'"
        [class.dark\:bg-neutral-900]="rightPanelTab() === 'definePattern'"
        [class.text-blue-600]="rightPanelTab() === 'definePattern'"
        [class.dark\:text-blue-400]="rightPanelTab() === 'definePattern'"
        [class.text-neutral-600]="rightPanelTab() !== 'definePattern'"
        [class.dark\:text-neutral-400]="rightPanelTab() !== 'definePattern'"
        id="define-pattern-tab-button"
        [paTooltip]="'tooltips.tools.definePattern' | transloco"
      >
        {{ "definePattern.title" | transloco }}
      </button>
      } @if (defineBrushState.isActive()) {
      <button
        type="button"
        (click)="rightPanelTab.set('defineBrush')"
        class="flex-1 px-4 py-2 text-sm font-medium"
        [class.bg-white]="rightPanelTab() === 'defineBrush'"
        [class.dark\:bg-neutral-900]="rightPanelTab() === 'defineBrush'"
        [class.text-blue-600]="rightPanelTab() === 'defineBrush'"
        [class.dark\:text-blue-400]="rightPanelTab() === 'defineBrush'"
        [class.text-neutral-600]="rightPanelTab() !== 'defineBrush'"
        [class.dark\:text-neutral-400]="rightPanelTab() !== 'defineBrush'"
        id="define-brush-tab-button"
        [paTooltip]="'tooltips.tools.defineBrush' | transloco"
      >
        {{ "defineBrush.title" | transloco }}
      </button>
      } @if (defineShapeState.isActive()) {
      <button
        type="button"
        (click)="rightPanelTab.set('defineShape')"
        class="flex-1 px-4 py-2 text-sm font-medium"
        [class.bg-white]="rightPanelTab() === 'defineShape'"
        [class.dark\:bg-neutral-900]="rightPanelTab() === 'defineShape'"
        [class.text-blue-600]="rightPanelTab() === 'defineShape'"
        [class.dark\:text-blue-400]="rightPanelTab() === 'defineShape'"
        [class.text-neutral-600]="rightPanelTab() !== 'defineShape'"
        [class.dark\:text-neutral-400]="rightPanelTab() !== 'defineShape'"
        id="define-shape-tab-button"
        [paTooltip]="'tooltips.tools.defineShape' | transloco"
      >
        {{ "defineShape.title" | transloco }}
      </button>
      } @if (strokeState.isActive()) {
      <button
        type="button"
        (click)="rightPanelTab.set('stroke')"
        class="flex-1 px-4 py-2 text-sm font-medium"
        [class.bg-white]="rightPanelTab() === 'stroke'"
        [class.dark\:bg-neutral-900]="rightPanelTab() === 'stroke'"
        [class.text-blue-600]="rightPanelTab() === 'stroke'"
        [class.dark\:text-blue-400]="rightPanelTab() === 'stroke'"
        [class.text-neutral-600]="rightPanelTab() !== 'stroke'"
        [class.dark\:text-neutral-400]="rightPanelTab() !== 'stroke'"
        id="stroke-tab-button"
        [paTooltip]="'tooltips.panels.stroke' | transloco"
      >
        {{ "stroke.title" | transloco }}
      </button>
      }
    </div>
    <div class="flex-1 overflow-auto">
      @if (rightPanelTab() === 'layers') {
      <pa-layers-panel />
      } @else if (rightPanelTab() === 'bones') {
      <pa-bones-panel />
      } @else if (rightPanelTab() === 'palette') {
      <pa-palette-panel />
      } @else if (rightPanelTab() === 'contentAwareFill') {
      <pa-content-aware-fill-panel
        (onApply)="onContentAwareFillApply()"
        (onCancel)="onContentAwareFillCancel()"
      />
      } @else if (rightPanelTab() === 'definePattern') {
      <pa-define-pattern-panel />
      } @else if (rightPanelTab() === 'defineBrush') {
      <pa-define-brush-panel />
      } @else if (rightPanelTab() === 'defineShape') {
      <pa-define-shape-panel />
      } @else if (rightPanelTab() === 'stroke') {
      <pa-stroke-panel
        (onApply)="onStrokeApply()"
        (onCancel)="onStrokeCancel()"
      />
      }
    </div>
  </div>

  <div
    class="row-start-3 col-start-1 -col-end-1 cursor-row-resize bg-transparent hover:bg-neutral-300/30 dark:hover:bg-neutral-600/30"
    (pointerdown)="onGripDown('bottom', $event)"
  ></div>

  <div
    id="bottom-panel-container"
    class="row-start-4 col-start-1 -col-end-1 border-t border-neutral-200 dark:border-neutral-800 bg-neutral-50 dark:bg-neutral-900 flex flex-col"
  >
    <div
      class="shrink-0 flex border-b border-neutral-200 dark:border-neutral-800 bg-white dark:bg-neutral-800"
      id="bottom-panel-tabs"
    >
      <button
        type="button"
        (click)="bottomPanelTab.set('timeline')"
        class="px-4 py-2 text-sm font-medium"
        [class.bg-neutral-50]="bottomPanelTab() === 'timeline'"
        [class.dark\:bg-neutral-900]="bottomPanelTab() === 'timeline'"
        [class.text-blue-600]="bottomPanelTab() === 'timeline'"
        [class.dark\:text-blue-400]="bottomPanelTab() === 'timeline'"
        [class.text-neutral-600]="bottomPanelTab() !== 'timeline'"
        [class.dark\:text-neutral-400]="bottomPanelTab() !== 'timeline'"
        id="timeline-tab-button"
        [paTooltip]="'tooltips.panels.timeline' | transloco"
      >
        {{ "timeline.title" | transloco }}
      </button>
      <button
        type="button"
        (click)="bottomPanelTab.set('animationCreator')"
        class="px-4 py-2 text-sm font-medium"
        [class.bg-neutral-50]="bottomPanelTab() === 'animationCreator'"
        [class.dark\:bg-neutral-900]="bottomPanelTab() === 'animationCreator'"
        [class.text-blue-600]="bottomPanelTab() === 'animationCreator'"
        [class.dark\:text-blue-400]="bottomPanelTab() === 'animationCreator'"
        [class.text-neutral-600]="bottomPanelTab() !== 'animationCreator'"
        [class.dark\:text-neutral-400]="bottomPanelTab() !== 'animationCreator'"
        id="animation-creator-tab-button"
        [paTooltip]="'tooltips.panels.animationCreator' | transloco"
      >
        <span id="animation-creator-tab-title">{{ "animationCreator.title" | transloco }}</span>
        <span id="animation-creator-tab-dev-badge" class="ml-2 inline-flex items-center px-2 py-0.5 text-[10px] font-medium rounded-sm bg-yellow-200 dark:bg-yellow-800 text-yellow-900 dark:text-yellow-50" title="{{ 'badges.dev' | transloco }}">
          {{ "badges.dev" | transloco }}
        </span>
      </button>
    </div>
    <div class="flex-1 overflow-hidden">
      @if (bottomPanelTab() === 'timeline') {
      <pa-timeline-panel class="h-full" />
      } @else {
      <pa-animation-creator-panel class="h-full" />
      }
    </div>
  </div>
</div>
